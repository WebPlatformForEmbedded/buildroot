From 8ce6bbe6bbca1711e438bfcbb7bb7b258eae4980 Mon Sep 17 00:00:00 2001
From: "k.plata" <k.plata@metrological.com>
Date: Thu, 4 Nov 2021 13:43:45 +0100
Subject: [PATCH] Seperate WebKit options from UX

---
 WebKitBrowser/UX.config | 54 ++++++++++++++++++++++++++---------------
 1 file changed, 35 insertions(+), 19 deletions(-)

diff --git a/WebKitBrowser/UX.config b/WebKitBrowser/UX.config
index 28e883c4..afcfa67d 100644
--- a/WebKitBrowser/UX.config
+++ b/WebKitBrowser/UX.config
@@ -17,33 +17,49 @@ map()
     kv(url "about:blank")
     kv(useragent ${PLUGIN_UX_USERAGENT})
     kv(injectedbundle "libWPEInjectedBundle${CMAKE_SHARED_LIBRARY_SUFFIX}")
-    kv(transparent ${PLUGIN_WEBKITBROWSER_TRANSPARENT})
-    kv(compositor "aa")
+    if(PLUGIN_UX_TRANSPARENT)
+        kv(transparent true)
+    else()
+        kv(transparent false)
+    endif()
+    kv(compositor ${PLUGIN_UX_COMPOSITOR})
     kv(inspector "0.0.0.0:10000")
     kv(fps true)
     kv(cursor false)
     kv(touch false)
-    kv(msebuffers "audio:2m,video:15m,text:1m")
-    kv(memoryprofile ${PLUGIN_WEBKITBROWSER_MEMORYPROFILE})
-    kv(memorypressure ${PLUGIN_WEBKITBROWSER_MEMORYPRESSURE})
+    kv(msebuffers ${PLUGIN_UX_MSEBUFFERS})
+    kv(memoryprofile ${PLUGIN_UX_MEMORYPROFILE})
+    kv(memorypressure ${PLUGIN_UX_MEMORYPRESSURE})
     kv(mediacontenttypesrequiringhardwaresupport ${PLUGIN_WEBKITBROWSER_MEDIA_CONTENT_TYPES_REQUIRING_HARDWARE_SUPPORT})
-    kv(mediadiskcache ${PLUGIN_WEBKITBROWSER_MEDIADISKCACHE})
-    kv(diskcache ${PLUGIN_WEBKITBROWSER_DISKCACHE})
-    kv(xhrcache ${PLUGIN_WEBKITBROWSER_XHRCACHE})
+    if(PLUGIN_UX_MEDIADISKCACHE)
+        kv(mediadiskcache true)
+    else()
+        kv(mediadiskcache false)
+    endif()
+    kv(diskcache ${PLUGIN_UX_DISKCACHE})
+    if(PLUGIN_UX_MEDIADISKCACHE)
+        kv(xhrcache true)
+    else()
+        kv(xhrcache false)
+    endif()
     kv(noncompositedwebgl true)
     kv(secure false)
-    kv(webgl ${PLUGIN_WEBKITBROWSER_WEBGL})
-    kv(threadedpainting ${PLUGIN_WEBKITBROWSER_THREADEDPAINTING})
+    if(PLUGIN_UX_WEBGL)
+        kv(webgl true)
+    else()
+        kv(webgl false)
+    endif()
+    kv(threadedpainting ${PLUGIN_UX_THREADEDPAINTING})
     kv(height ${PLUGIN_WEBKITBROWSER_HEIGHT})
     kv(width ${PLUGIN_WEBKITBROWSER_WIDTH})
-    if(PLUGIN_WEBKITBROWSER_CLIENTIDENTIFIER)
-        kv(clientidentifier ${PLUGIN_WEBKITBROWSER_CLIENTIDENTIFIER})
+    if(PLUGIN_UX_CLIENTIDENTIFIER)
+        kv(clientidentifier ${PLUGIN_UX_CLIENTIDENTIFIER})
     endif()
-    if(PLUGIN_WEBKITBROWSER_LOCALSTORAGE)
-        kv(localstorage ${PLUGIN_WEBKITBROWSER_LOCALSTORAGE})
+    if(PLUGIN_UX_LOCALSTORAGE)
+        kv(localstorage ${PLUGIN_UX_LOCALSTORAGE})
     endif()
-    if(PLUGIN_WEBKITBROWSER_COOKIESTORAGE)
-        kv(cookiestorage ${PLUGIN_WEBKITBROWSER_COOKIESTORAGE})
+    if(PLUGIN_UX_COOKIESTORAGE)
+        kv(cookiestorage ${PLUGIN_UX_COOKIESTORAGE})
     endif()
     if(PLUGIN_WEBKITBROWSER_ALTERNATIVE_EXEC_PATH)
         kv(execpath ${PLUGIN_WEBKITBROWSER_ALTERNATIVE_EXEC_PATH})
@@ -60,16 +76,16 @@ ans(configuration)
 map_append(${configuration} root ${rootobject})
 
 map()
-if(PLUGIN_WEBKITBROWSER_ENABLE_JIT)
+if(PLUGIN_UX_JIT)
     kv(useJIT true)
 else()
     kv(useJIT false)
 endif()
-if(PLUGIN_WEBKITBROWSER_ENABLE_DFG)
+if(PLUGIN_UX_DFG)
     kv(useDFG true)
 else()
     kv(useDFG false)
 endif()
 end()
 ans(javascriptsettings)
-map_append(${configuration} javascript ${javascriptsettings})
\ No newline at end of file
+map_append(${configuration} javascript ${javascriptsettings})
-- 
2.25.1

